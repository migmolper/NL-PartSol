# Transforms the contents of the src variable, changing all file suffixes
# from .c to .o, thus constructing the object file list we need.

OBJS = $(SOURCES:$(SRCDIR)%.c= $(OBJDIR)/$(TARGET)/%.o)

# this may also be replaced by the ar command (creating archive)
$(BINDIR)/$(TARGET)/$(EXE): $(OBJS)
	@echo "*************************************************"
	$(CC) $(OBJS) $(NUMFLAGS) -o $@
	@echo " "
	@echo "Linking complete in mode :" $(TARGET) "!"
	@echo " "
	@echo "*************  GeHoJerez compiled !! ************"
	@echo " "

$(OBJS) : $(OBJDIR)/$(TARGET)/%.o: $(SRCDIR)/%.c
	@echo "*************************************************"
	$(CC) $(OBJDIR)/$(TARGET) -c $< -o $@
	@echo "Compiled "$<" successfully!"


# New rule for cleaning up every target, in order to rebuild
# the whole program from scratch
clean:
	rm -rf $(OBJDIR)/$(TARGET)/*.o
	rm -rf $(BINDIR)/$(TARGET)/$(EXE)
	@echo "Cleanup complete!"

